# BMUnit
## 什么是BMUnit
&emsp;&emsp;BMUnit是一个工具包，它将ByteMan融入到了当下最流行的两个测试框架中（JUnit和TestNG）。与这两个框架相似，BMUnit也使用注释的方式进行测试。通过增加很少的注释代码到你的代码，以及很少的Jar包添加到你的类路径中，并Run你的测试用例就可以使ByteMan加载到你的JVM环境中了。在测试用例运行期间可以通过Byteman相关的注解将指定的规则通过代理加载到内存，这样可以改变应用代码的运行时行为。规则是在测试运行前加载到内存中的，在测试完成时自动卸载。
&emsp;&emsp;最基础的测试规则是是使用`trace`来展示实际被执行的内容。这可以让你确定，你的代码是否达到了预期的要求。稍微复杂的规则可使用`validation`关键字指定异常条件来进行测试。规则被触发过了，那么条件就应该是`false`。如果条件值是`true`那么规则指定的动作会抛出异常，这会导致测试失败。
&emsp;&emsp;更复杂的规则采用一种叫作故障注入的技术。它们修改应用程序或运行时的行为以模拟仅在异常情况下才会发生的测试场景。例如：它可以模拟在打开文件或者改变返回值时抛出`FileNotFoundException`异常来测试异常情况下程序的行为。基本测试可能只需要使用跟踪规则或简单的验证规则。复杂的测试通常会使用所有三种类型的规则，并且可能会注入多个规则，以便创建故障然后通过应用程序代码传播它。本教程提供了所有三种类型规则的简单示例。下一个教程将介绍高级故障注入和传播。
&emsp;&emsp;BMUnit 允许您直接在测试类或测试方法的注释中指定简单的规则。类注释适用于类中所有测试方法的规则。这些规则在运行所有方法之前加载一次，然后在所有方法都经过测试后卸载。这特别适用于跟踪规则。无论您正在运行什么测试，您通常都需要在测试执行期间跟踪相同的信息。有时在类注解中指定验证规则也是合适的。在任何测试中都不应出现某些情况。
&emsp;&emsp;个别测试方法上的注释会导致仅针对该特定测试的范围加载规则，并在测试完成时卸载。当您指定故障注入规则时，方法注释通常是最合适的。在某些测试中抛出异常可能是合适的，比如当他们尝试打开文件时。但是，如果您的其他测试实际上需要测试读写操作，您可能希望文件流类的行为恢复正常。
## 使用BMUnit的简单例程
&emsp;&emsp;如下内容描述了BMUnit能干什么，不能干什么，并提供了简单的例程。具体的例子描述如下：
>有一个程序的简单类`WebWriter`，它是用来生成带有你名字的（你名字会出现在标题和内容中）HTML页面。你可以指定HTML文件进行写入操作。`WebWriter`